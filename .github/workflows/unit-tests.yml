name: Run Unit Test iOS

on:
    workflow_call:


jobs:
    unit-test:
      runs-on: macos-latest
      steps:
      - uses: actions/download-artifact@v4
        with:
          name: shared-variables

      - name: Ler vari√°vel
        run: |
          export SCHEME=$(yq e .SCHEME variables.yaml)''
          export CONFIGURATION=$(yq e .CONFIGURATION variables.yaml)''
          export DESTINATION=$(yq e .DESTINATION variables.yaml)''

      - name: Run Unit Tests
        run: |
          echo "xcodebuild test \
            -workspace "${{ vars.APP_NAME || env.APP_NAME }}.xcworkspace" \
            -scheme "${{ vars.SCHEME || env.SCHEME }}" \
            -destination "${{ vars.DESTINATION || env.DESTINATION }}" \
            -enableCodeCoverage YES "
